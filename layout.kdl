layout {
    default_tab_template {
        // the default zellij tab-bar and status bar plugins
        // pane size=1 borderless=true {
        //     plugin location="zellij:tab-bar"
        // }
        children
        pane size=2 borderless=true {
            plugin location="zellij:status-bar"
        }
    }
    tab {
        pane split_direction="vertical" {
            pane split_direction="horizontal" {
                pane name="Sim Publisher" command="./build/sumo-sim-data-publisher"

                pane name="Lamps to DB" command="cargo" {
                    args "run" "--bin" "streetlamps-subscriber" "--release"
                }

                pane name="Flutter" command="flutter" {
                    args "run"
                    cwd "../flutter_app"
                }
            }
            pane split_direction="horizontal" {
                pane name="SUMO" command="sumo" {
                    args "-c" "katrinebjerg-lamp/katrinebjerg-lamp.sumocfg" "--remote-port" "10000"
                }
                pane name="Graph Server" command="pixi" {
                    args "run" "uwsgi" "--http" "0.0.0.0:8000" "--wsgi-file" "streetlamp-timeseries-server.py" "--callable" "app"
                }
                pane name="Network & Logic" command="pixi" {
                    args "run" "python3" "network.py"
                    cwd "../python_network"
                }
            }
        }
    }
}

env {
    RUST_BACKTRACE 0
    RUST_LOG "info"
}

pane_frames true
